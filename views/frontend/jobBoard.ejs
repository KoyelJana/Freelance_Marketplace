<!doctype html>
<!--
	Solution by GetTemplates.co
	URL: https://gettemplates.co
-->
<html lang="en">

<%-include('./layouts/header')%>

    <body>
        <%-include('./layouts/navber')%>
            <!-- Job Board Section -->
            <div class="container-fluid gtco-job-board mt-3 mb-5" id="jobs" style="margin-bottom: 150px; margin-top: 50px;">
                <div class="container">
                    <h2>Filter Jobs</h2>
                    <form action="/job_board" method="GET" class="row g-3 mb-5">

                        <!-- Skills -->
                        <div class="col-md-3">
                            <label for="skills" class="form-label">Skills</label>
                            <input type="text" name="skills" id="skills" class="form-control"
                                value="<%= query.skills || '' %>" placeholder="e.g. JavaScript">
                        </div>

                        <!-- Min Budget -->
                        <div class="col-md-2">
                            <label for="minBudget" class="form-label">Min Budget ($)</label>
                            <input type="number" name="minBudget" id="minBudget" class="form-control"
                                value="<%= query.minBudget ? query.minBudget : '' %>">
                        </div>

                        <!-- Max Budget -->
                        <div class="col-md-2">
                            <label for="maxBudget" class="form-label">Max Budget ($)</label>
                            <input type="number" name="maxBudget" id="maxBudget" class="form-control"
                                value="<%= query.maxBudget ? query.maxBudget : '' %>">
                        </div>

                        <!-- Status Filter -->
                        <div class="col-md-2">
                            <label for="status" class="form-label">Status</label>
                            <select name="status" id="status" class="form-control">
                                <option value="">All</option>
                                <option value="open" <%=query.status==='open' ? 'selected' : '' %>>Open</option>
                                <option value="in_progress" <%=query.status==='in_progress' ? 'selected' : '' %>>In
                                    Progress</option>
                                <option value="completed" <%=query.status==='completed' ? 'selected' : '' %>>Completed
                                </option>
                                <option value="closed" <%=query.status==='closed' ? 'selected' : '' %>>Closed</option>
                            </select>
                        </div>

                        <!-- Posted Date -->
                        <div class="col-md-3">
                            <label for="postedDate" class="form-label">Posted After</label>
                            <input type="date" name="postedDate" id="postedDate" class="form-control"
                                value="<%= query.postedDate ? query.postedDate : '' %>">
                        </div>

                        <!-- Submit Button -->
                        <div class="col-12 d-flex justify-content-end">
                            <button type="submit" class="submit-button mt-3">Apply Filters</button>
                        </div>

                    </form>
                    <div class="row mb-4">
                        <div class="col-md-6">
                            <h2>Available Jobs</h2>
                        </div>
                    </div>
                    <div class="col-12 d-flex justify-content-end mb-5">
                        <a href="/job_board">
                            Browse All Jobs<i class="fa fa-briefcase me-2"></i>
                        </a>
                    </div>

                    <!-- Job Cards -->
                    <div class="row">
                        <% if (jobs.length===0) { %>
                            <div class="col-12">
                                <div class="alert alert-warning">No jobs found.</div>
                            </div>
                            <% } %>

                                <% jobs.forEach(job=> { %>
                                    <div class="col-md-4 mb-4">
                                        <div class="card h-100 shadow-sm border-left-primary">

                                            <!-- Job Image -->
                                            <% if (job.image) { %>
                                                <img src="<%= job.image %>" class="card-img-top" alt="<%= job.title %>"
                                                    style="height:200px; object-fit:cover;">
                                                <% } else { %>
                                                    <img src="/frontend/images/no-job.png" class="card-img-top"
                                                        alt="No Image" style="height:200px; object-fit:cover;">
                                                    <% } %>

                                                        <div class="card-body d-flex flex-column">
                                                            <h5 class="card-title">
                                                                <%= job.title %>
                                                            </h5>
                                                            <p class="text-muted mb-1">
                                                                <small><strong>Budget:</strong> $<%= job.budget %> |
                                                                        <strong>Status:</strong>
                                                                        <%= job.status || "Open" %></small>
                                                            </p>
                                                            <p class="text-muted mb-2">
                                                                <small><strong>Skills:</strong>
                                                                    <%= job.skills?.join(', ') || "None" %></small>
                            </p>
                            <p class="card-text flex-grow-1">
                                <%= job.description.length > 100 ? job.description.substring(0, 100) + "..." : job.description %>
                            </p>
                            <p class="text-end text-muted mb-2">
                                <small>Posted on: <%= job.createdAt.toDateString() %></small>
                            </p>
                            <div class="d-flex justify-content-between">
                            <a href="/job/<%= job._id %>" class="btn btn-primary btn-sm">View Details<i class="fa fa-eye"></i></a>
                            </div>
                            
                        </div>
                    </div>
                </div>
            <% }) %>
        </div>
    </div>
</div>
<!-- End Job Board Section -->

    <%-include('./layouts/footer')%>
    </body>

</html>