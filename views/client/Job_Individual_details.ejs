<!DOCTYPE html>
<html lang="en">

<%- include('./layouts/header') %>

<body id="page-top">

    <!-- Page Wrapper -->
    <div id="wrapper">

        <!-- Sidebar -->
        <%- include('./layouts/sidebar') %>
        <!-- End of Sidebar -->

        <!-- Content Wrapper -->
        <div id="content-wrapper" class="d-flex flex-column">

            <!-- Main Content -->
            <div id="content">

                <!-- Topbar -->
                <%- include('./layouts/topbar') %>
                <!-- End of Topbar -->

                <!-- Begin Page Content -->
                <div class="container-fluid">

                    <!-- Page Heading -->
                    <div class="d-flex justify-content-between align-items-center mb-4">
                        <h2 class="h4 text-gray-800"><%= job.title %></h2>
                        <a href="/jobs" class="btn btn-secondary btn-sm">
                            <i class="fas fa-arrow-left me-1"></i> Back to Jobs
                        </a>
                    </div>

                    <!-- Flash Message -->
                    <% if (message && message.length > 0) { %>
                        <div class="alert alert-info"><%= message %></div>
                    <% } %>

                    <!-- Job Details Card -->
                    <div class="card shadow-sm border-left-primary">
                        <% if (job.image) { %>
                            <img src="<%= job.image %>" 
                                 class="card-img-top" 
                                 alt="<%= job.title %>" 
                                 style="height:300px; object-fit:contain;">
                        <% } else { %>
                            <img src="/images/no-job.png" 
                                 class="card-img-top" 
                                 alt="No Image" 
                                 style="height:300px; object-fit:cover;">
                        <% } %>

                        <div class="card-body">
                            <h4 class="card-title"><%= job.title %></h4>
                            <p class="text-muted">
                                <strong>Budget:</strong> $<%= job.budget %> <br>
                                <strong>Status:</strong> <%= job.status %> <br>
                                <strong>Deadline:</strong> <%= job.deadline.toDateString() %> <br>
                                <strong>Posted On:</strong> <%= job.createdAt.toDateString() %>
                            </p>

                            <p>
                                <strong>Skills Required:</strong> 
                                <span class="badge bg-primary text-light">
                                    <%= job.skills.join("</span> <span class='badge bg-primary text-light'>") %>
                                </span>
                            </p>

                            <hr>

                            <h5>Description</h5>
                            <p><%= job.description %></p>

                            <div class="d-flex justify-content-center mt-4" style="gap: 20px;">
                                <a href="/jobs/edit/<%= job._id %>" class="btn btn-warning btn-sm me-2">
                                    <i class="fas fa-edit"></i> Edit
                                </a>
                                <form action="/jobs/delete/<%= job._id %>" 
                                      method="POST" 
                                      onsubmit="return confirm('Are you sure you want to delete this job?')">
                                    <button type="submit" class="btn btn-danger btn-sm">
                                        <i class="fas fa-trash"></i> Delete
                                    </button>
                                </form>
                            </div>
                        </div>
                    </div>

                </div>
                <!-- /.container-fluid -->

            </div>
            <!-- End of Main Content -->

            <!-- Footer -->
            <%- include('./layouts/footer') %>

        </div>
        <!-- End of Content Wrapper -->

    </div>
    <!-- End of Page Wrapper -->

</body>

</html>
